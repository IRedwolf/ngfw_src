<html>
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=us-ascii">
<style type="text/css">
#outlook a{ padding:0; }

body {
	color: #000;
    font-size: 12px;
    font-weight: normal;
    font-family: tahoma, arial, verdana, sans-serif;
}

td {
    border: none;
    padding: 2;
}

table {
    border: none;
    border-collapse: collapse;
    border-spacing: 0;
    padding: 2;
    callspacing: 0;
    width: 100%;
}

</style>
</head>
<body>

<table>
<tr style="background-color:#ffffff; color:#333333;">
<td style="width:82px;">
<img src="{{ attachment,/var/www/images/BrandingLogo.png|id=logo@untangle.com }}"/>
</td>
<td style="font-size:22px; font-weight:bold; vertical-align:top; padding:10px;">
<br/>
{{ title }}
{% if url != "" %}
<br/>
<a style="font-size:12px;" href="{{ url }}">{% trans "Click here to view the reports" %}</a>
{% endif %}
</td>
</tr>

<tr>
<td colspan="2">
<table>
<tr>
<td style="width:48px; height:48px; background-color: #333333; text-align:center;">
	<img src="{{ attachment,/usr/share/untangle/web/skins/common/images/admin/icons/icon_config.png|id=icon-config@untangle.com }}"/>
</td>
<td style="font-size:15px; background-color: #333333;color:#ffffff">
{% trans "Config" %}
</td>
</tr>
</table>
</td>
</tr>

{% cycle #fffffff #f0f0f0 as rowColors %}

<tr>
<td colspan="2">

<table>
<tr style="background-color:{{ rowColors }};">
<td style="width:300px;">
{% trans "Hostname" %}
</td>
<td>
{{ networkManager.getNetworkSettings.getHostName }}
</td>
</tr>

{% cycle rowColors %}
<tr style="background-color:{{ rowColors }};">
<td>
{% trans "Domain Name" %}
</td>
<td>
{{ networkManager.getNetworkSettings.getDomainName }}
</td>
</tr>

{% cycle rowColors %}
<tr style="background-color:{{ rowColors }};">
<td>
{% trans "Current WAN IP Addresses" %}
</td>
<td>
{% for interface in networkManager.getEnabledInterfaces %}
{% if interface.getDisabled == false %}
{% if interface.getIsWan == true %}
{% with interfaceId=interface.getInterfaceId %}
{% with status=networkManager.getInterfaceStatus,interface.getInterfaceId %}
{{ status.getV4Address.getHostAddress }}
{% endwith %}
{% endwith %}
{% endif %}
{% endif %}
{% endfor %}
</td>
</tr>

<!--
{% cycle rowColors %}
<tr style="background-color:{{ rowColors }};">
<td>
{% trans "Version" %}
</td>
<td>
{{ getFullVersion }} 
{% if systemManager.upgradesAvailable == true %}
{%trans "(upgrades available)" %}
{% endif%}
</td>
</tr>
-->

{% with reportsNode=nodeManager.node,untangle-node-reports %}
	{% for name in ["Network" "Administration" "Hosts" "Devices" "System" "Shield" "Reports"] %} 

	{% with reports=reportsNode.getReportsManager.getReportEntries,name %}
	{% if reports.size != 0 %}
		{% for report in reports %}
		{% if report.getType != EVENT_LIST %}

<!--
		{% if report.getTitle == "CPU Load" %}
-->
		{% cycle rowColors %}
		<tr style="background-color:{{ rowColors }};">
		<td valign="top" width="25%">
{{ report.getTitle }}
		</td>
		<td width="75%">
		{% with reportRows=reportsNode.getReportsManager.getDataForReportEntry,report,startDate,endDate,null,-1 %}


		{% if report.getType == TEXT %}

		{% with reportRow=reportRows|first %}
{{ report.getTextString|format=reportRow,report.getTextColumns }}
		{% endwith %}

		{% else %}

<img src="{{ attachment,chart,report.getCategory,report.getTitle|id={{report.getUniqueId}}@untangle.com }}" width="640" style="display:block;width:100% !important;" >

		{% endif %}


		{% endwith %}
		</td></tr>
<!--
		{% endif %}
-->

		{% endif %}
		{% endfor %}
	{% endif %}
	{% endwith %}
{% endfor %}
{% endwith %}

<tr>
<td colspan="2">
<table>
<tr>
<td style="width:48px; height:48px; background-color: #333333; text-align:center;">
	<img src="{{ attachment,/usr/share/untangle/web/skins/common/images/admin/icons/icon_apps.png|id=icon-apps@untangle.com }}"/>
</td>
<td style="font-size:15px; background-color: #333333;color:#ffffff">
{% trans "Apps" %}
</td>
</tr>
</table>
</td>
</tr>

<tr>
<td colspan="2">

{% with reportsNode=nodeManager.node,untangle-node-reports %}
{% for node in nodeManager.nodeInstances|distinct=getNodeProperties.getDisplayName %}
	{% with reports=reportsNode.getReportsManager.getReportEntries,node.getNodeProperties.getDisplayName|getType==TEXT %}
	{% if reports.size != 0 %}
<table>
	<tr style="background-color:#d0d0d0;">
		<td style="width:48px;">
		<img src="{{ attachment,/usr/share/untangle/web/skins/common/images/admin/apps/{{ node.getNodeProperties.getName }}_42x42.png|id=icon-{{ node.getNodeProperties.getName }}@untangle.com }}" />
		</td>
		<td style="font-size:20px; color:#444444; font-weight:bold;">
		{{ node.getNodeProperties.getDisplayName }}
		</td>
	</tr>
		{% for report in reports %}
		{% if report.getType != EVENT_LIST %}




		{% cycle rowColors %}
	<tr style="background-color:{{ rowColors }};">
		<td></td>
		<td style="font-size:14px; font-weight:normal;">{{ report.getTitle }}</td>
	</tr>
	<tr style="background-color:{{ rowColors }};">
		<td></td>
		{% with reportRows=reportsNode.getReportsManager.getDataForReportEntry,report,startDate,endDate,null,-1 %}
		{% if report.getType == TEXT %}

		{% with reportRow=reportRows|first %}
		<td style="font-size:12px; font-weight:normal;">{{ report.getTextString|format=reportRow,report.getTextColumns }}</td>
		{% endwith %}
		{% else %}
		<td>
<img src="{{ attachment,chart,report.getCategory,report.getTitle|id={{report.getUniqueId}}@untangle.com }}" width="640" style="display:block;width:100% !important;" >
		</td>

		{% endif %}

		{% endwith %}
	</tr>

		{% endif %}	
		{% endfor %}
</table>
	{% endif %}
	{% endwith %}
{% endfor %}
{% endwith %}

</td>
</tr>


</table>

</body>
</html>
